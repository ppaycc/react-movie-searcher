(this["webpackJsonpreact-movie-searcher"]=this["webpackJsonpreact-movie-searcher"]||[]).push([[0],{17:function(e,t,n){e.exports={paginationContainerItem:"Pagination_paginationContainerItem__2n1c_",paginationItem:"Pagination_paginationItem__3CuWt",paginationItemActive:"Pagination_paginationItemActive__1Osn8",paginationBtn:"Pagination_paginationBtn__1Diwq"}},20:function(e,t,n){e.exports={header:"Header_header___AbcZ",wrapper:"Header_wrapper__35Sya",active:"Header_active__7XzYf"}},21:function(e,t,n){e.exports={items:"Movie_items__3ajfD",pages:"Movie_pages__39u8f",flex:"Movie_flex__1EVK4"}},25:function(e,t,n){e.exports={main:"Favorite_main__2wrHT",favoriteBtn:"Favorite_favoriteBtn__2SqsX",hidden:"Favorite_hidden__1Ex1G"}},31:function(e,t,n){e.exports={favorite:"Card_favorite__3V9qY",noFavorite:"Card_noFavorite__22t-v",card:"Card_card__1l8-H"}},34:function(e,t,n){e.exports={main:"Trailer_main__2gjuo",flex:"Trailer_flex__2V65P"}},45:function(e,t,n){e.exports={input:"InputForm_input__1dAND"}},53:function(e,t,n){},54:function(e,t,n){},6:function(e,t,n){e.exports={mt10:"ShowCard_mt10__2pVg8",img:"ShowCard_img__swRJs",bg:"ShowCard_bg__3AVMK",bg1:"ShowCard_bg1__5l88b",imgBg:"ShowCard_imgBg__3c7MH",main:"ShowCard_main__3gcv3",poster:"ShowCard_poster__3C2-o",recommendations:"ShowCard_recommendations__2DMN-",recommendationsItem:"ShowCard_recommendationsItem__fDiGa",addBtn:"ShowCard_addBtn__1vj_W",addRecommended:"ShowCard_addRecommended__nKEEl"}},79:function(e,t){},80:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),r=n(22),i=n.n(r),o=(n(53),n(54),n(12)),s=n(20),u=n.n(s),d=function(e){return Object(a.jsx)("header",{className:u.a.header,children:Object(a.jsxs)("div",{className:u.a.wrapper,children:[Object(a.jsx)(o.b,{to:"/movie",activeClassName:u.a.active,children:"Movie"}),Object(a.jsx)(o.b,{to:"/favorite",activeClassName:u.a.active,children:"Favorites"})]})})},l=n(5),j=n(31),b=n.n(j),f=n.p+"static/media/photo_2020-12-28_16-51-34.c89219cf.jpg",O=function(e){var t=e.poster?"https://image.tmdb.org/t/p/original".concat(e.poster):f;return Object(a.jsxs)("div",{className:"".concat(b.a.card," ").concat(b.a[e.favorite?"favorite":"noFavorite"]),children:[Object(a.jsx)(o.b,{to:"/".concat(e.path),children:Object(a.jsx)("img",{src:t})}),Object(a.jsx)("div",{children:e.title}),Object(a.jsx)("div",{children:e.date?e.date.replace(/-/g,"/"):""})]})},g=n(21),m=n.n(g),h=n(3),p=n(14),v=n(2),_=n(13),x="SET_NEW_RESULT",N="SET_TOTAL_PAGE",y="CHANGE_VALUE_MOVIE",E="NOT_FOUND",S="SET_CURRENT_PAGE",P="SET_IS_FETCHING",w="CHANGE_CURRENT_PORTION_FOR_PAGE",T="RESET_PORTION_COUNT",I={query:"",sought:"",textForPagination:"",currentPage:1,totalPage:"",result:[],noResult:"You can find something",isFetching:!1,portionPage:1,url:"https://api.themoviedb.org/3/search/movie?api_key=7f3d862c78d7078a1d152442970fcce6&language=en-US"},C=function(e){return{type:w,portionPage:e}},R=function(){return{type:P}},F=function(e,t){return{type:x,result:e,query:t}},G=function(e){return{type:N,page:e}},k=function(e){return{type:y,value:e}},A=function(){return{type:E}},M=function(e){return{type:S,page:e}},q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return function(a){a(R());var c=t.length>0?"&query=".concat(t):"";_.get(e+"&page="+n+c).then((function(e){0===e.data.results.length?(a(A()),a(G("")),a(F([],t)),a(R())):(a(M(n)),a(F(e.data.results,t)),a(G(e.data.total_pages)),a(R()))}))}},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(v.a)(Object(v.a)({},e),{},{result:Object(p.a)(t.result),sought:t.query,query:""});case N:return Object(v.a)(Object(v.a)({},e),{},{totalPage:t.page});case y:return Object(v.a)(Object(v.a)({},e),{},{query:t.value});case E:return Object(v.a)(Object(v.a)({},e),{},{noResult:"I couldn't find it. Try again"});case S:return Object(v.a)(Object(v.a)({},e),{},{currentPage:t.page});case P:return Object(v.a)(Object(v.a)({},e),{},{isFetching:!e.isFetching});case w:return Object(v.a)(Object(v.a)({},e),{},{portionPage:e.portionPage+t.portionPage});case T:return Object(v.a)(Object(v.a)({},e),{},{portionPage:1});default:return e}},D=function(){return Object(a.jsx)("div",{className:"preloader",children:Object(a.jsx)("div",{className:"preloaderWrapper",children:Object(a.jsxs)("div",{id:"floatingCirclesG",children:[Object(a.jsx)("div",{className:"f_circleG",id:"frotateG_01"}),Object(a.jsx)("div",{className:"f_circleG",id:"frotateG_02"}),Object(a.jsx)("div",{className:"f_circleG",id:"frotateG_03"}),Object(a.jsx)("div",{className:"f_circleG",id:"frotateG_04"}),Object(a.jsx)("div",{className:"f_circleG",id:"frotateG_05"}),Object(a.jsx)("div",{className:"f_circleG",id:"frotateG_06"}),Object(a.jsx)("div",{className:"f_circleG",id:"frotateG_07"}),Object(a.jsx)("div",{className:"f_circleG",id:"frotateG_08"})]})})})},V=n(45),U=n.n(V),L=function(e){var t=Object(h.b)();return Object(a.jsxs)("div",{className:U.a.input,children:[Object(a.jsx)("input",{placeholder:"Type here...",type:"text",value:e.query,onKeyDown:function(n){return function(n){13===n.keyCode&&e.query.trim().length>0&&t(e.getNewItems(e.url,e.query))}(n)},onChange:function(n){return t(e.changeValueMovie(n.currentTarget.value))}}),Object(a.jsx)("button",{onClick:function(){e.query.trim().length>0&&t(e.getNewItems(e.url,e.query))},children:"Search"})]})},H=n(17),J=n.n(H),Y=function(e){for(var t=Object(h.b)(),n=[],c=1;c<=e.totalPage;c++)n.push(c);var r=e.totalPage/10,i=10*(e.portionPage-1)+1,o=10*e.portionPage;return Object(a.jsxs)("div",{children:[Object(a.jsx)("button",{className:J.a.paginationBtn,disabled:1===e.portionPage,onClick:function(){return t(e.changePortionPage(-1))},children:"<<"}),Object(a.jsx)("div",{className:J.a.paginationContainerItem,children:n.filter((function(e){return e>=i&&e<o+1})).map((function(n){return Object(a.jsx)("span",{className:e.currentPage===n?J.a.paginationItemActive:J.a.paginationItem,onClick:function(){return function(n){t(e.getNewItems(e.url,e.sought,n))}(n)},children:n},n)}))}),Object(a.jsx)("button",{className:J.a.paginationBtn,disabled:r<e.portionPage,onClick:function(){return t(e.changePortionPage(1))},children:">>"})]})},K=n(33),W=n.n(K),X=n(46),$="GET_FAVORITE",z="SET_FAVORITE",Z="SET_FAVORITE_CARD",Q="RESET_FAVORITE_ITEMS",ee="DELETE_FAVORITE_ITEM",te={favorites:[],results:[]},ne=function(){return{type:$}},ae=function(e){return{type:ee,id:e}},ce=function(e){return function(){var t=Object(X.a)(W.a.mark((function t(n){var a,c;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=[],c=0;case 2:if(!(c<e.length)){t.next=8;break}return t.next=5,_.get("https://api.themoviedb.org/3/".concat(e[c].type,"/").concat(e[c].id,"?api_key=7f3d862c78d7078a1d152442970fcce6&language=en-US")).then((function(e){a.push(e.data)}));case 5:c++,t.next=2;break;case 8:n({type:Z,items:a});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:var n=JSON.parse(localStorage.getItem("favorite"))||[];return Object(v.a)(Object(v.a)({},e),{},{favorites:n});case z:var a={id:t.id,type:t.kind},c=JSON.parse(localStorage.getItem("favorite"))||[];return c.push(a),localStorage.setItem("favorite",JSON.stringify(c)),Object(v.a)({},e);case Z:return Object(v.a)(Object(v.a)({},e),{},{results:Object(p.a)(t.items)});case Q:return Object(v.a)(Object(v.a)({},e),{},{results:[]});case ee:var r=e.favorites.filter((function(e){return e.id!==t.id}));return localStorage.setItem("favorite",JSON.stringify(r)),Object(v.a)(Object(v.a)({},e),{},{favorites:Object(p.a)(r)});default:return e}},ie=function(e){var t=Object(h.b)(),n=Object(h.c)((function(e){return e.moviePage.query})),r=Object(h.c)((function(e){return e.moviePage.result})),i=Object(h.c)((function(e){return e.moviePage.noResult})),o=Object(h.c)((function(e){return e.moviePage.url})),s=Object(h.c)((function(e){return e.moviePage.totalPage})),u=Object(h.c)((function(e){return e.moviePage.sought})),d=Object(h.c)((function(e){return e.moviePage.currentPage})),l=Object(h.c)((function(e){return e.moviePage.isFetching})),j=Object(h.c)((function(e){return e.moviePage.portionPage})),b=Object(h.c)((function(e){return e.favorites.favorites}));Object(c.useEffect)((function(){t({type:T})}),[u]),Object(c.useEffect)((function(){window.scrollTo(0,0),t(ne())}),[]);var f=r.map((function(e){var t=b.some((function(t){return t.id===e.id}));return Object(a.jsx)(O,{date:e.release_date,title:e.title,id:e.id,poster:e.poster_path,path:"movie/movie-".concat(e.id),favorite:t},e.id)}));return Object(a.jsxs)(a.Fragment,{children:[l&&Object(a.jsx)(D,{}),Object(a.jsxs)("div",{className:m.a.flex,children:[Object(a.jsx)("div",{className:m.a.pages,children:u.length>0?"Results on request: ".concat(u):""}),Object(a.jsx)(L,{query:n,getNewItems:q,changeValueMovie:k,url:o})]}),Object(a.jsx)("div",{className:m.a.pages,children:s>0&&Object(a.jsx)(Y,{totalPage:s,portionPage:j,getNewItems:q,url:o,sought:u,changePortionPage:C,currentPage:d})}),Object(a.jsx)("div",{className:m.a.items,children:0!==f.length?f:Object(a.jsx)("p",{children:i})})]})},oe=n(26),se=n(6),ue=n.n(se),de="SET_RESULT",le="SET_FETCHING",je="SET_TRAILER",be="SET_RECOMMENDED",fe="SET_TOTAL_PAGE_RECOMMENDED",Oe="SET_SIMILAR",ge="SET_TOTAL_PAGE_SIMILAR",me={result:{},trailer:[],recommendations:[],totalRecommendedPage:1,similar:[],totalSimilarPage:1,isFetching:!1},he=function(){return{type:le}},pe=function(e,t){return function(n){n(he()),_.get("https://api.themoviedb.org/3/".concat(e,"/").concat(t,"?api_key=7f3d862c78d7078a1d152442970fcce6&language=en-US")).then((function(e){var t;n((t=e.data,{type:de,result:t})),n(he())}))}},ve=function(e){return{type:je,trailer:e}},_e=function(e,t,n,a){return function(c){_.get("https://api.themoviedb.org/3/".concat(e,"/").concat(t,"/recommendations?api_key=7f3d862c78d7078a1d152442970fcce6&language=en-US&page=").concat(n,"\n")).then((function(e){var t;c((t=e.data.total_pages,{type:fe,payload:t})),c(function(e){return{type:be,payload:e}}(e.data.results))})),_.get("https://api.themoviedb.org/3/".concat(e,"/").concat(t,"/similar?api_key=7f3d862c78d7078a1d152442970fcce6&language=en-US&page=").concat(a,"\n")).then((function(e){var t;c((t=e.data.total_pages,{type:ge,payload:t})),c(function(e){return{type:Oe,payload:e}}(e.data.results))}))}},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case de:return Object(v.a)(Object(v.a)({},e),{},{result:t.result});case je:return Object(v.a)(Object(v.a)({},e),{},{trailer:t.trailer});case le:return Object(v.a)(Object(v.a)({},e),{},{isFetching:!e.isFetching});case be:return Object(v.a)(Object(v.a)({},e),{},{recommendations:Object(p.a)(t.payload)});case fe:return Object(v.a)(Object(v.a)({},e),{},{totalRecommendedPage:t.payload});case Oe:return Object(v.a)(Object(v.a)({},e),{},{similar:Object(p.a)(t.payload)});case ge:return Object(v.a)(Object(v.a)({},e),{},{totalSimilarPage:t.payload});default:return e}},Ne=n(34),ye=n.n(Ne),Ee=function(e){var t=e.trailer.map((function(e){return Object(a.jsx)("a",{target:"_blank",href:"https://www.youtube.com/watch?v=".concat(e.key),children:e.name},e.id)}));return Object(a.jsxs)("div",{className:ye.a.main,children:[Object(a.jsx)("h2",{children:"Trailers:"}),Object(a.jsx)("div",{className:ye.a.flex,children:t})]})},Se=Object(l.f)((function(e){var t=Object(h.b)(),n=Object(h.c)((function(e){return e.showInfo.result})),r=Object(h.c)((function(e){return e.showInfo.isFetching})),i=Object(h.c)((function(e){return e.showInfo.trailer})),o=Object(h.c)((function(e){return e.favorites.favorites})),s=Object(h.c)((function(e){return e.showInfo.recommendations})),u=Object(h.c)((function(e){return e.showInfo.similar})),d=Object(h.c)((function(e){return e.showInfo.totalRecommendedPage})),l=Object(h.c)((function(e){return e.showInfo.totalSimilarPage})),j=e.match.params.path.split("-")[0],b=parseInt(e.match.params.path.split("-")[1]),g=o.some((function(e){return e.id===b})),m=Object(c.useState)(g),p=Object(oe.a)(m,2),v=p[0],x=p[1];Object(c.useEffect)((function(){window.scrollTo(0,0),t(pe(j,b)),t(function(e){return function(t){_.get("https://api.themoviedb.org/3/movie/".concat(e,"/videos?api_key=7f3d862c78d7078a1d152442970fcce6&language=en-US\n")).then((function(e){e.data.results.length>0?t(ve(e.data.results)):t(ve([]))}))}}(b)),t(_e(j,b,S,I)),t(ne()),P((function(e){return 1})),C((function(e){return 1})),v!==g&&x((function(e){return!e}))}),[j,b,g,t]);var N=function(e,n){t(function(e,t){return{type:z,kind:e,id:t}}(e,n)),x((function(e){return!e}))},y=Object(c.useState)(1),E=Object(oe.a)(y,2),S=E[0],P=E[1],w=Object(c.useState)(1),T=Object(oe.a)(w,2),I=T[0],C=T[1];Object(c.useEffect)((function(){t(_e(j,b,S,I))}),[S,I,j,b,t]),console.log("isFavorite",g,"fv",v);var R="https://image.tmdb.org/t/p/original"+n.poster_path;return Object(a.jsxs)(a.Fragment,{children:[r&&Object(a.jsx)(D,{}),Object(a.jsxs)("div",{className:ue.a.mt10,children:[Object(a.jsxs)("div",{className:ue.a.main,children:[v?Object(a.jsx)("button",{className:ue.a.addBtn,onClick:function(){return t(ae(b))},children:"Delete from favorite"}):Object(a.jsx)("button",{className:ue.a.addBtn,onClick:function(){return N(j,b)},children:"Add to favorite"}),Object(a.jsx)("img",{src:n.poster_path?R:f,className:ue.a.poster}),Object(a.jsxs)("div",{className:ue.a.description,children:[Object(a.jsx)("h2",{children:n.title}),n.tagline&&Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Tagline:"})," ",n.tagline]}),n.overview&&Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Overview:"})," ",n.overview]}),n.genres&&Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Genres:"})," ",n.genres.map((function(e){return e.name})).join(", ")]}),n.runtime>0&&Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Runtime:"})," ",n.runtime]}),n.release_date&&Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Release date:"})," ",n.release_date.split("-").reverse().join(".")]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Status:"})," ",n.status]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"For adult:"})," ",n.adult?"YES":"NO"]}),n.original_language&&Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Original language:"})," ",n.original_language.toUpperCase()]}),n.budget>0&&Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Budget:"})," $ ",n.budget," "]}),n.revenue>0&&Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Revenue:"})," $ ",n.revenue]}),n.vote_average>0&&Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Vote average:"})," ",n.vote_average]})]})]}),n.backdrop_path&&Object(a.jsxs)("div",{className:ue.a.bg1,children:[Object(a.jsx)("div",{className:ue.a.bg}),Object(a.jsx)("img",{className:ue.a.img,src:"https://image.tmdb.org/t/p/original".concat(n.backdrop_path),alt:""})]})]},Date.now()),i.length>0&&Object(a.jsx)(Ee,{trailer:i}),s.length>0&&Object(a.jsxs)(a.Fragment,{children:[" ",Object(a.jsx)("h2",{children:"recommendations"}),Object(a.jsxs)("div",{className:ue.a.recommendations,children:[s.map((function(e){var t=o.some((function(t){return t.id===e.id}));return Object(a.jsx)("div",{className:ue.a.recommendationsItem,children:Object(a.jsx)(O,{date:e.release_date,title:e.title,id:e.id,poster:e.poster_path,path:"movie/movie-".concat(e.id),favorite:t})},e.id)})),S===d||Object(a.jsx)("button",{className:ue.a.addRecommended,onClick:function(){return P(S+1)},children:"Show more"})]})]}),u.length>0&&Object(a.jsxs)(a.Fragment,{children:[" ",Object(a.jsx)("h2",{children:"Similar"}),Object(a.jsxs)("div",{className:ue.a.recommendations,children:[u.map((function(e){var t=o.some((function(t){return t.id===e.id}));return Object(a.jsx)("div",{className:ue.a.recommendationsItem,children:Object(a.jsx)(O,{date:e.release_date,title:e.title,id:e.id,poster:e.poster_path,path:"movie/movie-".concat(e.id),favorite:t})},e.id)})),I===l||Object(a.jsx)("button",{className:ue.a.addRecommended,onClick:function(){return C(I+1)},children:"Show more"})]})]})]})})),Pe=n(25),we=n.n(Pe),Te=function(e){var t=Object(h.c)((function(e){return e.favorites.favorites})),n=Object(h.c)((function(e){return e.favorites.results})),r=Object(h.b)();Object(c.useEffect)((function(){window.scrollTo(0,0),r(ne()),r(ce(t))}),[]),Object(c.useEffect)((function(){r(ce(t))}),[t]);var i=n.map((function(e){return Object(a.jsxs)("div",{className:we.a.hidden,children:[Object(a.jsx)(O,{path:"movie/movie-".concat(e.id),date:e.release_date,title:e.title,id:e.id,poster:e.poster_path,favorite:!0},e.id),Object(a.jsx)("button",{className:we.a.favoriteBtn,onClick:function(){return r(ae(e.id))},children:"delete"})]})}));return Object(a.jsx)("div",{className:we.a.main,children:i.length>0?i:Object(a.jsx)("p",{children:"You don't have favorites movie"})})};var Ie=function(){return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(d,{}),Object(a.jsxs)("div",{className:"block",children:[Object(a.jsx)(l.b,{exact:!0,path:"/movie",render:function(){return Object(a.jsx)(ie,{})}}),Object(a.jsx)(l.b,{exact:!0,path:"/movie/:path",render:function(){return Object(a.jsx)(Se,{})}}),Object(a.jsx)(l.b,{exact:!0,path:"/favorite",render:function(){return Object(a.jsx)(Te,{})}}),Object(a.jsx)(l.b,{exact:!0,path:"/",render:function(){return Object(a.jsx)(l.a,{to:"/movie"})}})]})]})},Ce=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,81)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))},Re=n(16),Fe=n(47),Ge=(n(79),Object(Re.c)({moviePage:B,showInfo:xe,favorites:re})),ke=Object(Re.d)(Ge,Object(Re.a)(Fe.a));window.store=ke;var Ae=ke;Ae.getState(),i.a.render(Object(a.jsx)(o.a,{children:Object(a.jsx)(h.a,{store:Ae,children:Object(a.jsx)(Ie,{})})}),document.getElementById("root")),Ce()}},[[80,1,2]]]);
//# sourceMappingURL=main.9a3ba47e.chunk.js.map