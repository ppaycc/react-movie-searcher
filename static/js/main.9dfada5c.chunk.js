(this["webpackJsonpreact-movie-searcher"]=this["webpackJsonpreact-movie-searcher"]||[]).push([[0],{11:function(e,t,n){e.exports={mt10:"ShowCard_mt10__2pVg8",img:"ShowCard_img__swRJs",bg:"ShowCard_bg__3AVMK",bg1:"ShowCard_bg1__5l88b",imgBg:"ShowCard_imgBg__3c7MH",main:"ShowCard_main__3gcv3",poster:"ShowCard_poster__3C2-o",recommendations:"ShowCard_recommendations__2DMN-",recommendationsItem:"ShowCard_recommendationsItem__fDiGa"}},16:function(e,t,n){e.exports={paginationContainerItem:"Pagination_paginationContainerItem__2n1c_",paginationItem:"Pagination_paginationItem__3CuWt",paginationItemActive:"Pagination_paginationItemActive__1Osn8",paginationBtn:"Pagination_paginationBtn__1Diwq"}},20:function(e,t,n){e.exports={header:"Header_header___AbcZ",wrapper:"Header_wrapper__35Sya",active:"Header_active__7XzYf"}},21:function(e,t,n){e.exports={items:"Movie_items__3ajfD",pages:"Movie_pages__39u8f",flex:"Movie_flex__1EVK4"}},25:function(e,t,n){e.exports={main:"Favorite_main__2wrHT",favoriteBtn:"Favorite_favoriteBtn__2SqsX",hidden:"Favorite_hidden__1Ex1G"}},30:function(e,t,n){e.exports={favorite:"Card_favorite__3V9qY",noFavorite:"Card_noFavorite__22t-v",card:"Card_card__1l8-H"}},33:function(e,t,n){e.exports={main:"Trailer_main__2gjuo",flex:"Trailer_flex__2V65P"}},44:function(e,t,n){e.exports={input:"InputForm_input__1dAND"}},53:function(e,t,n){},54:function(e,t,n){},79:function(e,t){},80:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),r=n(22),i=n.n(r),o=(n(53),n(54),n(12)),s=n(20),u=n.n(s),l=function(e){return Object(a.jsx)("header",{className:u.a.header,children:Object(a.jsxs)("div",{className:u.a.wrapper,children:[Object(a.jsx)(o.b,{to:"/movie",activeClassName:u.a.active,children:"Movie"}),Object(a.jsx)(o.b,{to:"/favorite",activeClassName:u.a.active,children:"Favorites"})]})})},d=n(5),j=n(30),b=n.n(j),f=n.p+"static/media/photo_2020-12-28_16-51-34.c89219cf.jpg",g=function(e){var t=e.poster?"https://image.tmdb.org/t/p/original".concat(e.poster):f;return Object(a.jsxs)("div",{className:"".concat(b.a.card," ").concat(b.a[e.favorite?"favorite":"noFavorite"]),children:[Object(a.jsx)(o.b,{to:"/".concat(e.path),children:Object(a.jsx)("img",{src:t})}),Object(a.jsx)("div",{children:e.title}),Object(a.jsx)("div",{children:e.date?e.date.replace(/-/g,"/"):""})]})},h=n(21),O=n.n(h),p=n(3),v=n(19),m=n(2),_=n(13),x="SET_NEW_RESULT",N="SET_TOTAL_PAGE",y="CHANGE_VALUE_MOVIE",E="NOT_FOUND",P="SET_CURRENT_PAGE",w="SET_IS_FETCHING",T="CHANGE_CURRENT_PORTION_FOR_PAGE",S="RESET_PORTION_COUNT",I={query:"",sought:"",textForPagination:"",currentPage:1,totalPage:"",result:[],noResult:"You can find something",isFetching:!1,portionPage:1,url:"https://api.themoviedb.org/3/search/movie?api_key=7f3d862c78d7078a1d152442970fcce6&language=en-US"},C=function(e){return{type:T,portionPage:e}},F=function(){return{type:w}},R=function(e,t){return{type:x,result:e,query:t}},G=function(e){return{type:N,page:e}},k=function(e){return{type:y,value:e}},A=function(){return{type:E}},q=function(e){return{type:P,page:e}},V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return function(a){a(F());var c=t.length>0?"&query=".concat(t):"";_.get(e+"&page="+n+c).then((function(e){0===e.data.results.length?(a(A()),a(G("")),a(R([],t)),a(F())):(a(q(n)),a(R(e.data.results,t)),a(G(e.data.total_pages)),a(F()))}))}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(m.a)(Object(m.a)({},e),{},{result:Object(v.a)(t.result),sought:t.query,query:""});case N:return Object(m.a)(Object(m.a)({},e),{},{totalPage:t.page});case y:return Object(m.a)(Object(m.a)({},e),{},{query:t.value});case E:return Object(m.a)(Object(m.a)({},e),{},{noResult:"I couldn't find it. Try again"});case P:return Object(m.a)(Object(m.a)({},e),{},{currentPage:t.page});case w:return Object(m.a)(Object(m.a)({},e),{},{isFetching:!e.isFetching});case T:return Object(m.a)(Object(m.a)({},e),{},{portionPage:e.portionPage+t.portionPage});case S:return Object(m.a)(Object(m.a)({},e),{},{portionPage:1});default:return e}},D=function(){return Object(a.jsx)("div",{className:"preloader",children:Object(a.jsx)("div",{className:"preloaderWrapper",children:Object(a.jsxs)("div",{id:"floatingCirclesG",children:[Object(a.jsx)("div",{className:"f_circleG",id:"frotateG_01"}),Object(a.jsx)("div",{className:"f_circleG",id:"frotateG_02"}),Object(a.jsx)("div",{className:"f_circleG",id:"frotateG_03"}),Object(a.jsx)("div",{className:"f_circleG",id:"frotateG_04"}),Object(a.jsx)("div",{className:"f_circleG",id:"frotateG_05"}),Object(a.jsx)("div",{className:"f_circleG",id:"frotateG_06"}),Object(a.jsx)("div",{className:"f_circleG",id:"frotateG_07"}),Object(a.jsx)("div",{className:"f_circleG",id:"frotateG_08"})]})})})},U=n(44),B=n.n(U),H=function(e){var t=Object(p.b)();return Object(a.jsxs)("div",{className:B.a.input,children:[Object(a.jsx)("input",{placeholder:"Type here...",type:"text",value:e.query,onKeyDown:function(n){return function(n){13===n.keyCode&&e.query.trim().length>0&&t(e.getNewItems(e.url,e.query))}(n)},onChange:function(n){return t(e.changeValueMovie(n.currentTarget.value))}}),Object(a.jsx)("button",{onClick:function(){e.query.trim().length>0&&t(e.getNewItems(e.url,e.query))},children:"Search"})]})},L=n(16),J=n.n(L),Y=function(e){for(var t=Object(p.b)(),n=[],c=1;c<=e.totalPage;c++)n.push(c);var r=e.totalPage/10,i=10*(e.portionPage-1)+1,o=10*e.portionPage;return Object(a.jsxs)("div",{children:[Object(a.jsx)("button",{className:J.a.paginationBtn,disabled:1===e.portionPage,onClick:function(){return t(e.changePortionPage(-1))},children:"<<"}),Object(a.jsx)("div",{className:J.a.paginationContainerItem,children:n.filter((function(e){return e>=i&&e<o+1})).map((function(n){return Object(a.jsx)("span",{className:e.currentPage===n?J.a.paginationItemActive:J.a.paginationItem,onClick:function(){return function(n){t(e.getNewItems(e.url,e.sought,n))}(n)},children:n},n)}))}),Object(a.jsx)("button",{className:J.a.paginationBtn,disabled:r<e.portionPage,onClick:function(){return t(e.changePortionPage(1))},children:">>"})]})},K=n(32),W=n.n(K),X=n(45),$="GET_FAVORITE",z="SET_FAVORITE",Z="SET_FAVORITE_CARD",Q="RESET_FAVORITE_ITEMS",ee="DELETE_FAVORITE_ITEM",te={favorites:[],results:[]},ne=function(){return{type:$}},ae=function(e){return function(){var t=Object(X.a)(W.a.mark((function t(n){var a,c;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=[],c=0;case 2:if(!(c<e.length)){t.next=8;break}return t.next=5,_.get("https://api.themoviedb.org/3/".concat(e[c].type,"/").concat(e[c].id,"?api_key=7f3d862c78d7078a1d152442970fcce6&language=en-US")).then((function(e){a.push(e.data)}));case 5:c++,t.next=2;break;case 8:n({type:Z,items:a});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:var n=JSON.parse(localStorage.getItem("favorite"))||[];return Object(m.a)(Object(m.a)({},e),{},{favorites:n});case z:var a={id:t.id,type:t.kind},c=JSON.parse(localStorage.getItem("favorite"))||[];return c.push(a),localStorage.setItem("favorite",JSON.stringify(c)),Object(m.a)({},e);case Z:return Object(m.a)(Object(m.a)({},e),{},{results:Object(v.a)(t.items)});case Q:return Object(m.a)(Object(m.a)({},e),{},{results:[]});case ee:var r=e.favorites.filter((function(e){return e.id!==t.id}));return localStorage.setItem("favorite",JSON.stringify(r)),Object(m.a)(Object(m.a)({},e),{},{favorites:Object(v.a)(r)});default:return e}},re=function(e){var t=Object(p.b)(),n=Object(p.c)((function(e){return e.moviePage.query})),r=Object(p.c)((function(e){return e.moviePage.result})),i=Object(p.c)((function(e){return e.moviePage.noResult})),o=Object(p.c)((function(e){return e.moviePage.url})),s=Object(p.c)((function(e){return e.moviePage.totalPage})),u=Object(p.c)((function(e){return e.moviePage.sought})),l=Object(p.c)((function(e){return e.moviePage.currentPage})),d=Object(p.c)((function(e){return e.moviePage.isFetching})),j=Object(p.c)((function(e){return e.moviePage.portionPage})),b=Object(p.c)((function(e){return e.favorites.favorites}));Object(c.useEffect)((function(){t({type:S})}),[u]),Object(c.useEffect)((function(){window.scrollTo(0,0),t(ne())}),[]);var f=r.map((function(e){var t=b.some((function(t){return t.id===e.id}));return Object(a.jsx)(g,{date:e.release_date,title:e.title,id:e.id,poster:e.poster_path,path:"movie/movie-".concat(e.id),favorite:t},e.id)}));return Object(a.jsxs)(a.Fragment,{children:[d&&Object(a.jsx)(D,{}),Object(a.jsxs)("div",{className:O.a.flex,children:[Object(a.jsx)("div",{className:O.a.pages,children:u.length>0?"Results on request: ".concat(u):""}),Object(a.jsx)(H,{query:n,getNewItems:V,changeValueMovie:k,url:o})]}),Object(a.jsx)("div",{className:O.a.pages,children:s>0&&Object(a.jsx)(Y,{totalPage:s,portionPage:j,getNewItems:V,url:o,sought:u,changePortionPage:C,currentPage:l})}),Object(a.jsx)("div",{className:O.a.items,children:0!==f.length?f:Object(a.jsx)("p",{children:i})})]})},ie=n(47),oe=n(11),se=n.n(oe),ue="SET_RESULT",le="SET_FETCHING",de="SET_TRAILER",je="SET_RECOMMENDED",be={result:{},trailer:[],recommendations:[],isFetching:!1},fe=function(){return{type:le}},ge=function(e,t){return function(n){n(fe()),_.get("https://api.themoviedb.org/3/".concat(e,"/").concat(t,"?api_key=7f3d862c78d7078a1d152442970fcce6&language=en-US")).then((function(e){var t;n((t=e.data,{type:ue,result:t})),n(fe())}))}},he=function(e){return{type:de,trailer:e}},Oe=function(e){return{type:je,payload:e}},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ue:return Object(m.a)(Object(m.a)({},e),{},{result:t.result});case de:return Object(m.a)(Object(m.a)({},e),{},{trailer:t.trailer});case le:return Object(m.a)(Object(m.a)({},e),{},{isFetching:!e.isFetching});case je:return Object(m.a)(Object(m.a)({},e),{},{recommendations:t.payload});default:return e}},ve=n(33),me=n.n(ve),_e=function(e){var t=e.trailer.map((function(e){return Object(a.jsx)("a",{target:"_blank",href:"https://www.youtube.com/watch?v=".concat(e.key),children:e.name},e.id)}));return Object(a.jsxs)("div",{className:me.a.main,children:[Object(a.jsx)("h2",{children:"Trailers:"}),Object(a.jsx)("div",{className:me.a.flex,children:t})]})},xe=Object(d.f)((function(e){var t=Object(p.b)(),n=Object(p.c)((function(e){return e.showInfo.result})),r=Object(p.c)((function(e){return e.showInfo.isFetching})),i=Object(p.c)((function(e){return e.showInfo.trailer})),o=Object(p.c)((function(e){return e.favorites.favorites})),s=Object(p.c)((function(e){return e.showInfo.recommendations})),u=Object(p.c)((function(e){return e.favorites}));console.log(u);var l=e.match.params.path.split("-")[0],d=parseInt(e.match.params.path.split("-")[1]),j=o.some((function(e){return e.id===d})),b=Object(c.useState)(j),h=Object(ie.a)(b,2),O=h[0],v=h[1];Object(c.useEffect)((function(){window.scrollTo(0,0),t(ge(l,d)),t(function(e){return function(t){_.get("https://api.themoviedb.org/3/movie/".concat(e,"/videos?api_key=7f3d862c78d7078a1d152442970fcce6&language=en-US\n")).then((function(e){e.data.results.length>0?t(he(e.data.results)):t(he([]))}))}}(d)),t(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return function(a){_.get("https://api.themoviedb.org/3/".concat(e,"/").concat(t,"/recommendations?api_key=7f3d862c78d7078a1d152442970fcce6&language=en-US&page=").concat(n,"\n")).then((function(e){a(Oe(e.data.results))}))}}(l,d)),t(ne()),O!==j&&v((function(e){return!e}))}),[l,d,j]);var m=function(e,n){t(function(e,t){return{type:z,kind:e,id:t}}(e,n)),v((function(e){return!e}))};console.log(o),console.log("isFavorite",j,"fv",O);var x="https://image.tmdb.org/t/p/original"+n.poster_path;return Object(a.jsxs)(a.Fragment,{children:[O||Object(a.jsx)("button",{onClick:function(){return m(l,d)},children:"Add to favorite"}),r&&Object(a.jsx)(D,{}),Object(a.jsxs)("div",{className:se.a.mt10,children:[Object(a.jsxs)("div",{className:se.a.main,children:[Object(a.jsx)("img",{src:n.poster_path?x:f,className:se.a.poster}),Object(a.jsxs)("div",{className:se.a.description,children:[Object(a.jsx)("h2",{children:n.title}),n.tagline&&Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Tagline:"})," ",n.tagline]}),n.overview&&Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Overview:"})," ",n.overview]}),n.genres&&Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Genres:"})," ",n.genres.map((function(e){return e.name})).join(", ")]}),n.runtime>0&&Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Runtime:"})," ",n.runtime]}),n.release_date&&Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Release date:"})," ",n.release_date.split("-").reverse().join(".")]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Status:"})," ",n.status]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"For adult:"})," ",n.adult?"YES":"NO"]}),n.original_language&&Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Original language:"})," ",n.original_language.toUpperCase()]}),n.budget>0&&Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Budget:"})," $ ",n.budget," "]}),n.revenue>0&&Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Revenue:"})," $ ",n.revenue]}),n.vote_average>0&&Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Vote average:"})," ",n.vote_average]})]})]}),n.backdrop_path&&Object(a.jsxs)("div",{className:se.a.bg1,children:[Object(a.jsx)("div",{className:se.a.bg}),Object(a.jsx)("img",{className:se.a.img,src:"https://image.tmdb.org/t/p/original".concat(n.backdrop_path),alt:""})]})]},Date.now()),i.length>0&&Object(a.jsx)(_e,{trailer:i}),s.length>0&&Object(a.jsxs)(a.Fragment,{children:[" ",Object(a.jsx)("h2",{children:"Recommendations"}),Object(a.jsx)("div",{className:se.a.recommendations,children:s.map((function(e){var t=o.some((function(t){return t.id===e.id}));return Object(a.jsx)("div",{className:se.a.recommendationsItem,children:Object(a.jsx)(g,{date:e.release_date,title:e.title,id:e.id,poster:e.poster_path,path:"movie/movie-".concat(e.id),favorite:t})},e.id)}))})]})]})})),Ne=n(25),ye=n.n(Ne),Ee=function(e){var t=Object(p.c)((function(e){return e.favorites.favorites})),n=Object(p.c)((function(e){return e.favorites.results})),r=Object(p.b)();Object(c.useEffect)((function(){window.scrollTo(0,0),r(ne()),r(ae(t))}),[]),Object(c.useEffect)((function(){r(ae(t))}),[t]);var i=n.map((function(e){return Object(a.jsxs)("div",{className:ye.a.hidden,children:[Object(a.jsx)(g,{path:"movie/movie-".concat(e.id),date:e.release_date,title:e.title,id:e.id,poster:e.poster_path,favorite:!0},e.id),Object(a.jsx)("button",{className:ye.a.favoriteBtn,onClick:function(){return r((t=e.id,{type:ee,id:t}));var t},children:"delete"})]})}));return Object(a.jsx)("div",{className:ye.a.main,children:i.length>0?i:Object(a.jsx)("p",{children:"You don't have favorites movie"})})};var Pe=function(){return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(l,{}),Object(a.jsxs)("div",{className:"block",children:[Object(a.jsx)(d.b,{exact:!0,path:"/movie",render:function(){return Object(a.jsx)(re,{})}}),Object(a.jsx)(d.b,{exact:!0,path:"/movie/:path",render:function(){return Object(a.jsx)(xe,{})}}),Object(a.jsx)(d.b,{exact:!0,path:"/favorite",render:function(){return Object(a.jsx)(Ee,{})}}),Object(a.jsx)(d.b,{exact:!0,path:"/",render:function(){return Object(a.jsx)(d.a,{to:"/movie"})}})]})]})},we=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,81)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))},Te=n(15),Se=n(46),Ie=(n(79),Object(Te.c)({moviePage:M,showInfo:pe,favorites:ce})),Ce=Object(Te.d)(Ie,Object(Te.a)(Se.a));window.store=Ce;var Fe=Ce;Fe.getState(),i.a.render(Object(a.jsx)(o.a,{children:Object(a.jsx)(p.a,{store:Fe,children:Object(a.jsx)(Pe,{})})}),document.getElementById("root")),we()}},[[80,1,2]]]);
//# sourceMappingURL=main.9dfada5c.chunk.js.map